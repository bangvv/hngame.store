<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>HN Game - CÃ´ng ThÃ nh Chiáº¿n</title>

<meta name="description" content="Game chiáº¿n thuáº­t CÃ´ng ThÃ nh Chiáº¿n cá»±c hay">
<meta name="keywords" content="game CÃ´ng ThÃ nh Chiáº¿n, chiáº¿n thuáº­t, game Viá»‡t, HN Game, miá»…n phÃ­, game online, web game">
<meta property="og:title" content="Game chiáº¿n thuáº­t CÃ´ng ThÃ nh Chiáº¿n - HN Game">
<meta property="og:description" content="ChÆ¡i game CÃ´ng ThÃ nh Chiáº¿n hoÃ n toÃ n miá»…n phÃ­, vui nhá»™n vÃ  háº¥p dáº«n.">
<meta property="og:image" content="../image/congthanh.png">
<meta property="og:url" content="www.hngame.store/game/congthanh/webapp">
<meta property="og:type" content="website">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Game chiáº¿n thuáº­t CÃ´ng ThÃ nh Chiáº¿n">
<meta name="twitter:description" content="ChÆ¡i game CÃ´ng ThÃ nh Chiáº¿n hoÃ n toÃ n miá»…n phÃ­, vui nhá»™n vÃ  háº¥p dáº«n.">
<meta name="twitter:image" content="../image/congthanh.png">

<style>
html, body {
  background: #0f172a;
  color: #e2e8f0;
  font-family: 'Arial', sans-serif;
  margin: 0;
  padding: 0;
}

header {
  text-align: center;
  padding: 20px;
  background: #1e293b;
  color: #fff;
}

nav {
  background: #334155;
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 15px;
  padding: 10px 0;
}

nav a {
  color: #f8fafc;
  text-decoration: none;
  padding: 8px 14px;
  border-radius: 6px;
  transition: 0.3s;
}

nav a:hover {
  background: #60a5fa;
  color: #fff;
}

main {
  max-width: 1200px;
  margin: 20px auto;
  padding: 0 15px;
  justify-content: center;
}

.section {
  background: #1e293b;
  border-radius: 10px;
  padding: 20px;
  margin-bottom: 20px;
}

.section h2 {
  color: #60a5fa;
  margin-top: 0;
}

/* ğŸ¯ Container chÃ­nh cÄƒn giá»¯a tuyá»‡t Ä‘á»‘i */
.game-container {
  display: flex;
  flex-direction: column;
  justify-content: center;
  background: #1e293b;
  border-radius: 12px;
  text-align: center;
}

/* ğŸ–¥ï¸ Canvas máº·c Ä‘á»‹nh (desktop) */
canvas#canvas {
  display: block;
  background: #000;
  border: 2px solid #334155;
  border-radius: 10px;
  width: 486px;
  height: 864px;
  margin: 0 auto;
}

/* ğŸ“± Mobile giá»¯ Ä‘Ãºng tá»‰ lá»‡ 9:16 vÃ  cÄƒn giá»¯a */
/* Mobile */ 
@media (max-width: 768px) { 
  .game-container {width: 100%;display: flex;flex-direction: column;align-items: center;justify-content: center;} 
  canvas#canvas {width: 90%; height: calc(90% * 16 / 9);border: 2px solid #334155;border-radius: 10px;background: #000;} 
}

footer {
  text-align: center;
  padding: 20px;
  background: #1e293b;
  color: #94a3b8;
  font-size: 14px;
}

* {
  box-sizing: border-box; /* trÃ¡nh pháº§n tá»­ tÃ­nh sai chiá»u rá»™ng */
  max-width: 100vw;       /* khÃ´ng bao giá» rá»™ng hÆ¡n chiá»u rá»™ng viewport */
}

</style>
</head>

<body oncontextmenu="return false" onload="start()">
<header>
  <h1>HN Game</h1>
  <p>Kho game Viá»‡t cháº¥t lÆ°á»£ng - chÆ¡i miá»…n phÃ­, giáº£i trÃ­ má»—i ngÃ y</p>
</header>

<nav>
  <a href="../../../index.html">Trang chá»§</a>
  <a href="../../../chienthuat.html">Game chiáº¿n thuáº­t</a>
  <a href="../../../hanhdong.html">Game hÃ nh Ä‘á»™ng</a>
  <a href="../../../tritue.html">Game trÃ­ tuá»‡</a>
  <a href="../../../thethao.html">Game thá»ƒ thao</a>
  <a href="../../../lienhe.html">LiÃªn há»‡</a>
</nav>

<main>
  <section class="section">
    <h2>ğŸ® Giá»›i thiá»‡u game</h2>
    <p><strong>CÃ´ng ThÃ nh Chiáº¿n</strong> lÃ  trÃ² chÆ¡i trÃ­ tuá»‡ Ä‘á»‰nh cao, lá»±a chá»n cá»§a báº¡n quyáº¿t Ä‘á»‹nh váº­n má»‡nh cá»§a báº¡n, hÃ£y chÆ¡i háº¿t mÃ¬nh Ä‘á»ƒ tiáº¿n Ä‘áº¿n Ä‘inh cao.</p>
  </section>

  <section class="game-container">
    <div style="height:20px;"></div>
    <canvas id="canvas" width="1080" height="1920"></canvas>
    <div style="height:10px;"></div>
    <button id="fullscreen-btn" class="fullscreen-button">ğŸ–¥ï¸ Full mÃ n hÃ¬nh.</button>
  </section>

  <div style="height:30px;"></div>

  <section class="section">
    <h2>ğŸ“œ HÆ°á»›ng dáº«n chÆ¡i</h2>
    <ul>
      <li>ghÃ©p cÃ¡c item vá»›i nhau Ä‘á»ƒ Ä‘áº¡t Ä‘Æ°á»£c giÃ¡ trá»‹ tÆ°Æ¡ng á»©ng.</li>
      <li>Game match-3 huyá»n thoáº¡i.</li>
    </ul>
  </section>
</main>

<footer>
  &copy; 2025 HN Game. Táº¥t cáº£ báº£n quyá»n Ä‘Æ°á»£c báº£o lÆ°u.
</footer>

<script type="text/javascript" charset="utf-8" src="teavm/app.js"></script>

<script>
const canvas = document.getElementById("canvas");
const fullBtn = document.getElementById("fullscreen-btn");
const LOGICAL_WIDTH = 1080;
const LOGICAL_HEIGHT = 1920;

function isMobile() {
  return /Android|iPhone|iPad|iPod|Opera Mini|IEMobile/i.test(navigator.userAgent);
}

// === Resize canvas hiá»ƒn thá»‹ ===
function resizeCanvas() {
  const full = !!document.fullscreenElement;
  const mobile = isMobile();

  const LOGICAL_RATIO = LOGICAL_WIDTH / LOGICAL_HEIGHT;

  if (full) {
    // ===== Khi fullscreen =====
    const vw = window.innerWidth;
    const vh = window.innerHeight;

    const screenRatio = vw / vh;
    let displayW, displayH;

    if (screenRatio > LOGICAL_RATIO) {
      displayH = vh;
      displayW = vh * LOGICAL_RATIO;
    } else {
      displayW = vw;
      displayH = vw / LOGICAL_RATIO;
    }

    // âœ… DÃ¹ng transform Ä‘á»ƒ cÄƒn giá»¯a tuyá»‡t Ä‘á»‘i â€” trÃ¡nh lá»—i cháº¡m sai trÃªn desktop
    canvas.style.position = "absolute";
    canvas.style.left = "50%";
    canvas.style.top = "50%";
    canvas.style.transform = "translate(-50%, -50%)";
    canvas.style.width = `${displayW}px`;
    canvas.style.height = `${displayH}px`;

    // âœ… Táº¯t cuá»™n hoÃ n toÃ n trong fullscreen
    document.documentElement.style.overflow = "hidden";
    document.body.style.overflow = "hidden";
  } else {
    // ===== Khi thoÃ¡t fullscreen =====
    canvas.style.position = "relative";
    canvas.style.left = "";
    canvas.style.top = "";
    canvas.style.transform = "";

    if (mobile) {
      // ğŸ“± Mobile â€” bÃ¡m theo CSS (chiáº¿m 90% container, tá»± cÄƒn giá»¯a)
      canvas.style.width = "90%";
      canvas.style.height = "auto";
    } else {
      // ğŸ–¥ï¸ Desktop â€” kÃ­ch thÆ°á»›c máº·c Ä‘á»‹nh
      canvas.style.width = "486px";
      canvas.style.height = "864px";
    }

    // âœ… Cho phÃ©p cuá»™n dá»c, nhÆ°ng cháº·n cuá»™n ngang
    document.documentElement.style.overflowX = "hidden";
    document.body.style.overflowX = "hidden";
    document.documentElement.style.overflowY = "auto";
    document.body.style.overflowY = "auto";
  }
}



// === TÃ­nh tá»a Ä‘á»™ chÃ­nh xÃ¡c ===
function getCanvasCoords(evt) {
  const rect = canvas.getBoundingClientRect();

  // scaleX, scaleY cáº­p nháº­t má»—i láº§n dÃ¹ng, khÃ´ng lÆ°u cÅ©
  const scaleX = LOGICAL_WIDTH / rect.width;
  const scaleY = LOGICAL_HEIGHT / rect.height;

  let clientX, clientY;
  if (evt.touches && evt.touches.length > 0) {
    clientX = evt.touches[0].clientX;
    clientY = evt.touches[0].clientY;
  } else {
    clientX = evt.clientX;
    clientY = evt.clientY;
  }

  return {
    x: (clientX - rect.left) * scaleX,
    y: (clientY - rect.top) * scaleY,
  };
}

// === GÃ¡n sá»± kiá»‡n tÆ°Æ¡ng tÃ¡c ===
["mousedown", "touchstart"].forEach(ev =>
  canvas.addEventListener(ev, e => {
    e.preventDefault();
    resizeCanvas(); // ğŸ”¥ cáº­p nháº­t boundingRect ngay táº¡i thá»i Ä‘iá»ƒm click
    const p = getCanvasCoords(e);
    if (typeof gameTouchStart === "function") gameTouchStart(p.x, p.y);
  })
);
["mouseup", "touchend"].forEach(ev =>
  canvas.addEventListener(ev, e => {
    e.preventDefault();
    if (typeof gameTouchEnd === "function") gameTouchEnd();
  })
);
canvas.addEventListener("touchmove", e => {
  e.preventDefault();
  const p = getCanvasCoords(e);
  if (typeof gameTouchMove === "function") gameTouchMove(p.x, p.y);
});

// === Fullscreen toggle ===
fullBtn.addEventListener("click", async () => {
  try {
    if (canvas.requestFullscreen) await canvas.requestFullscreen();
    else if (canvas.webkitRequestFullscreen) await canvas.webkitRequestFullscreen();
    setTimeout(resizeCanvas, 200);
  } catch (e) {
    console.error("Fullscreen error:", e);
  }
});

// === Event thay Ä‘á»•i kÃ­ch thÆ°á»›c / xoay / fullscreen ===
["resize", "orientationchange", "fullscreenchange"].forEach(ev =>
  window.addEventListener(ev, () => setTimeout(resizeCanvas, 200))
);

// === Khá»Ÿi Ä‘á»™ng TeaVM game ===
function start() {
  resizeCanvas();
  if (typeof main === "function") main();
}
window.addEventListener("load", start);
</script>



</body>
</html>